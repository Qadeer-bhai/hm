<!DOCTYPE html>
<html>
  <head>
    <title>AI Image Generator</title>
    <style>
      body {
        text-align: center;
        font-family: sans-serif;
        margin-top: 50px;
        background: #f5f5f5;
      }
      input, button {
        padding: 10px;
        font-size: 16px;
        margin: 5px;
      }
      img {
        margin-top: 20px;
        max-width: 80%;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      }
    </style>
  </head>
  <body>

    <h2>üñºÔ∏è AI Image Generator</h2>

    <input id="prompt" placeholder="Enter prompt..." style="width:300px;">
    <br>
    <button onclick="gen()">Generate Image</button>
    <button id="downloadBtn" onclick="downloadImage()" hidden>‚¨áÔ∏è Download</button>

    <p id="msg"></p>
    <img id="img" hidden>

    <script>
      async function gen() {
        const p = document.getElementById("prompt").value;
        const m = document.getElementById("msg");
        const i = document.getElementById("img");
        const d = document.getElementById("downloadBtn");

        if (!p) return alert("Please enter a prompt");

        m.innerText = "‚è≥ Generating...";
        i.hidden = true;
        d.hidden = true;

        const r = await fetch("https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-2", {
          method: "POST",
          headers: {
            "Authorization": "Bearer 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",
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ inputs: p })
        });

        if (!r.ok) {
          m.innerText = "‚ùå Error generating image.";
          return;
        }

        const b = await r.blob();
        const url = URL.createObjectURL(b);
        i.src = url;
        i.hidden = false;
        d.hidden = false;
        d.setAttribute("data-url", url);
        m.innerText = "‚úÖ Image Ready!";
      }

      function downloadImage() {
        const url = document.getElementById("downloadBtn").getAttribute("data-url");
        const link = document.createElement("a");
        link.href = url;
        link.download = "ai-image.png";
        link.click();
      }
    </script>

  </body>
</html>
